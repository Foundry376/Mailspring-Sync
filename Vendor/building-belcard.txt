# ON MAC / LINUX

cd bctoolbox-master
cmake . -DCMAKE_INSTALL_PREFIX=../built -DCMAKE_PREFIX_PATH=../built -DENABLE_STATIC=YES -DENABLE_POLARSSL=NO -DENABLE_DECAF=NO -DENABLE_TESTS_COMPONENT=NO
make
make install

cd belr-master
cmake -DCMAKE_INSTALL_PREFIX=../built -DCMAKE_PREFIX_PATH="../built/include" -DENABLE_STATIC=YES -DENABLE_SHARED=NO -DENABLE_TESTS=NO
make
make install

cd belcard-master
cmake -DCMAKE_INSTALL_PREFIX=../built -DCMAKE_PREFIX_PATH="../built/include" -DENABLE_STATIC=YES -DENABLE_SHARED=NO -DENABLE_UNIT_TESTS=NO
make
make install


To test parsing a VCard:
 ./belcard-parser /Users/bengotow/Work/F376/Projects/Mailspring/client/mailsync/Vendor/belcard-master/tester/vcards/vcard-mine.vcf

To rebuild the grammar used to parse VCards:
 ./belr-compiler /Users/bengotow/Work/F376/Projects/Mailspring/client/mailsync/Vendor/belcard-master/src/vcard_rules /Users/bengotow/Work/F376/Projects/Mailspring/client/mailsync/Vendor/built/share/belr/grammars/vcard_grammar


NOTE!: I have modified the vcard_rules file to support VCard
Version 3 as well as Version 4! This mostly just involved adding
a few old attributes back in and loosening the parsing of names
and dates. 


NOTE!: Only Linux is building belcard in CI. The others are using binaries.

NOTE!: The grammar file should be copied to app/static. The ones generated
alongside compilation are not moved into this location automatically.

# ON WIN32:

cd ./bctoolbox-master
cmake . -DCMAKE_INSTALL_PREFIX="../belcard-built-win" -DCMAKE_PREFIX_PATH="../belcard-built-win" -DENABLE_SHARED=YES -DENABLE_POLARSSL=NO -DENABLE_DECAF=NO -DENABLE_TESTS_COMPONENT=NO
cmake --build . --target INSTALL --config Release

cd ../belr-master
cmake -DCMAKE_INSTALL_PREFIX="../belcard-built-win" -DCMAKE_PREFIX_PATH="../belcard-built-win/include" -DENABLE_STATIC=YES -DENABLE_SHARED=YES -DENABLE_TESTS=NO
cmake --build . --target INSTALL --config Release

cd ../belcard-master
cmake -DCMAKE_INSTALL_PREFIX="../belcard-built-win" -DCMAKE_PREFIX_PATH="../belcard-built-win/include" -DENABLE_STATIC=YES -DENABLE_SHARED=YES -DENABLE_UNIT_TESTS=NO
cmake --build . --target INSTALL --config Release
